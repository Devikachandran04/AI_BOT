<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Resume & Career Guide</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

  <h1>üìÑ AI Resume Builder & Career Bot</h1>

  <!-- Resume Section -->
  <h2>üìù Resume Builder</h2>
  <input id="name" placeholder="Full Name" />
  <input id="email" placeholder="Email" />
  <input id="education" placeholder="Education" />
  <textarea id="skills" placeholder="Skills (comma separated)"></textarea>
  <textarea id="experience" placeholder="Experience or Projects"></textarea>
  <button onclick="generatePDF()">üìÖ Download Resume</button>

  <!-- Career Section -->
  <h2>ü§ñ Career Guidance </h2>
  <input id="apiKey" placeholder="üîê Paste your OpenRouter API Key" />
  <input id="userInput" placeholder="üíº Type career like Web Developer, AI, etc." />
  <button onclick="getJobData()">üîç Suggest Jobs</button>

  <div id="chatOutput" class="chat-box"></div>
  <div id="jobOutput" class="api-output"></div>

  <script>
    const { jsPDF } = window.jspdf;

    function generatePDF() {
      const doc = new jsPDF();
      doc.setFontSize(18);
      doc.text("Resume", 90, 15);
      doc.setFontSize(12);
      doc.text("Name: " + document.getElementById("name").value, 10, 30);
      doc.text("Email: " + document.getElementById("email").value, 10, 40);
      doc.text("Education: " + document.getElementById("education").value, 10, 50);
      doc.text("Skills: " + document.getElementById("skills").value, 10, 60);
      doc.text("Experience: " + document.getElementById("experience").value, 10, 70);
      doc.save("Resume.pdf");
    }

    async function getJobData() {
      const prompt = document.getElementById("userInput").value;
      const apiKey = document.getElementById("apiKey").value;
      const chatBox = document.getElementById("chatOutput");
      const jobOutput = document.getElementById("jobOutput");

      chatBox.innerText = "üîÑ Generating career suggestions for '" + prompt + "'...";

      if (!apiKey) {
        jobOutput.innerHTML = `<strong style="color:red;">‚ùå Please enter your OpenRouter API key above.</strong>`;
        chatBox.innerText = "";
        return;
      }

      try {
        const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${apiKey.trim()}`
          },
          body: JSON.stringify({
            model: "mistralai/mistral-7b-instruct",
            messages: [
              {
                role: "system",
                content: "You are a career guidance expert helping students choose job paths."
              },
              {
                role: "user",
                content: `Suggest 3 ideal job roles and career growth tips for someone interested in "${prompt}". Keep it simple and helpful for students.`
              }
            ]
          })
        });

        const data = await response.json();

        if (!response.ok || !data.choices) {
          throw new Error(data?.error?.message || "API error");
        }

        const reply = data.choices[0].message.content;
        jobOutput.innerHTML = `<strong>‚ú® Career Suggestions:</strong><br><br>${reply}`;
        chatBox.innerText = "‚úÖ Gemini has responded!";
      } catch (error) {
        console.error(error);
        chatBox.innerText = "‚ö† Gemini API Error.";
        jobOutput.innerHTML = `<strong style="color:red;">‚ùå Error:</strong> ${error.message || "Something went wrong."}`;
      }
    }
  </script>

  <style>
    body {
      font-family: Arial;
      padding: 20px;
      background: #f2f7ff;
    }

    input,
    textarea,
    button {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    button {
      background: #0077cc;
      color: white;
      border: none;
      cursor: pointer;
    }

    .chat-box,
    .api-output {
      background: #e6f0ff;
      padding: 15px;
      border-radius: 5px;
      min-height: 50px;
      margin-top: 10px;
    }
  </style>

</body>
</html>
